# 数据准备

本篇是 Build Your Own Face Detection Model 的第二节。我们需要下载 WiderFace 以及 RetineFace 提供的标注数据。


### 1 >> WiderFace

下载 [WiderFace](http://shuoyang1213.me/WIDERFACE/index.html)，我们需要下载 WiderFace 的 train 和 val 部分。我是将之放在 `/data`下。

### 2 >> RetinaFace 标签

`RetinaFace`的标签中，`train`的标签格式为

```sh
# 0--Parade/0_Parade_marchingband_1_849.jpg
449 330 122 149 488.906 373.643 0.0 542.089 376.442 0.0 515.031 412.83 0.0 485.174 425.893 0.0 538.357 431.491 0.0 0.82
# 0--Parade/0_Parade_Parade_0_904.jpg
361 98 263 339 424.143 251.656 0.0 547.134 232.571 0.0 494.121 325.875 0.0 453.83 368.286 0.0 561.978 342.839 0.0 0.89
# 0--Parade/0_Parade_marchingband_1_799.jpg
78 221 7 8 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 -1.0 0.2
78 238 14 17 84.188 244.607 1.0 89.527 244.491 1.0 86.973 247.857 1.0 85.116 250.643 1.0 88.482 250.643 1.0 0.36
113 212 11 15 117.0 220.0 0.0 122.0 220.0 0.0 119.0 222.0 0.0 118.0 225.0 0.0 122.0 225.0 0.0 0.3
134 260 15 15 142.0 265.0 0.0 146.0 265.0 0.0 145.0 267.0 0.0 142.0 272.0 0.0 146.0 271.0 0.0 0.24
```
`#`后接图片路径，随后数行表示标签。前四位是 bbox 的左上坐标以及宽高。随后每 3 个数字一组，共5组。前两个表征人脸关键点坐标，后面一个数字取值为 0，1 或者 -1，是表征是否可见。0 表示可见，1 表示不可见，-1 表示无标注。最后一位数字是一个分数，是指这条标注的质量如何。

而`val`部分则没有关键点的标签，只有前四位标注。所以这个`val`只能测量 bbox 的准确度。

```sh
# 0--Parade/0_Parade_marchingband_1_465.jpg
345 211 4 4
331 126 3 3
250 126 3 4
221 128 4 5
427 116 3 4
393 79 3 4
373 119 3 4
90 225 6 5
```

需要特别注意的是，在 `Retinaface` 所提供的`train/label.txt`标签文件中，有一些人脸是不可用的，比如`bbox`有负值，或者全为0，我移除了它们。经修改过后的`train/label.txt`文件已随代码上传。

下载 [RetinaFace 标签](https://pan.baidu.com/s/1Laby0EctfuJGgGMgRRgykA)， 同样解压缩并放在`/data`下

```sh
ls /data
retinaface_gt_v1.1  WIDER_train  WIDER_val
```
